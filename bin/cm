#!/usr/bin/bash

# CMake wrapper

DEFAULT_ARGS=-DCMAKE_EXPORT_COMPILE_COMMANDS=YES
BUILD_TYPE=Debug
BUILD_DIR=build
ARGS="$@"
if [ "$1" == "release" ]; then BUILD_TYPE=Release; ARGS="${@:2}"; fi

echo cmake -B ${BUILD_DIR} -G Ninja ${DEFAULT_ARGS} -DCMAKE_BUILD_TYPE=${BUILD_TYPE} ${ARGS}

cmake -B ${BUILD_DIR} -G Ninja ${DEFAULT_ARGS} -DCMAKE_BUILD_TYPE=${BUILD_TYPE} ${ARGS} && \
cmake --build ${BUILD_DIR}
